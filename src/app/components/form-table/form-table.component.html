<form [formGroup]="form()" [class.disabled]="isDisabled" (keydown.enter)="$event.preventDefault()">
  <div formArrayName="rows" class="table-limit">

    <!-- Botones -->
    <div class="buttons-container">
      <div class="left-buttons">
        <button mat-raised-button class="action-button" (click)="addRow()">
          <mat-icon class="icon">add</mat-icon>
          Agregar fila
        </button>

        <button mat-raised-button class="action-button" (click)="removeRow()">
          <mat-icon class="icon">remove</mat-icon>
          Eliminar última fila
        </button>
      </div>

      <div class="right-button">
        <button mat-raised-button class="action-button" (click)="submitRequest()">
          <mat-icon class="icon">send</mat-icon>
          Enviar solicitud
        </button>
      </div>
    </div>

    <!-- Tabla -->
    <table mat-table [dataSource]="rows.controls" aria-label="Formulario dinámico">

      <!-- Columnas -->
      <ng-container matColumnDef="D.A.">
        <th mat-header-cell *matHeaderCellDef class="col-da">D.A.</th>
        <td mat-cell *matCellDef="let row; let i = index" [formGroupName]="i">
          <app-number-field formControlName="DA"></app-number-field>
        </td>
      </ng-container>

      <ng-container matColumnDef="N° de Solicitud">
        <th mat-header-cell *matHeaderCellDef class="col-ns">N° de Solicitud</th>
        <td mat-cell *matCellDef="let row; let i = index" [formGroupName]="i">
          <app-number-field formControlName="nroSolicitud"></app-number-field>
        </td>
      </ng-container>

      <ng-container matColumnDef="Ejercicio">
        <th mat-header-cell *matHeaderCellDef class="col-ej">Ejercicio</th>
        <td mat-cell *matCellDef="let row; let i = index" [formGroupName]="i">
          <app-number-field formControlName="ejercicio"></app-number-field>
        </td>
      </ng-container>

      <ng-container matColumnDef="N° de Orden de Pago">
        <th mat-header-cell *matHeaderCellDef class="col-op">N° de Orden de Pago</th>
        <td mat-cell *matCellDef="let row; let i = index" [formGroupName]="i">
          <app-text-field formControlName="ordenPago"></app-text-field>
        </td>
      </ng-container>

      <ng-container matColumnDef="Concepto, Proveedor o Contratista">
        <th mat-header-cell *matHeaderCellDef class="col-cpc">Concepto, Proveedor o Contratista</th>
        <td mat-cell *matCellDef="let row; let i = index" [formGroupName]="i">
          <mat-form-field appearance="outline" class="dropdown-field">
            <mat-select formControlName="concepto" placeholder="Seleccione una opción">
              <mat-option *ngFor="let option of conceptOptions" [value]="option">
                {{ option }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </td>
      </ng-container>

      <ng-container matColumnDef="Vencimiento">
        <th mat-header-cell *matHeaderCellDef class="col-venc">Vencimiento</th>
        <td mat-cell *matCellDef="let row; let i = index" [formGroupName]="i">
          <app-date-field formControlName="vencimiento"></app-date-field>
        </td>
      </ng-container>

      <ng-container matColumnDef="Importe Solicitado">
        <th mat-header-cell *matHeaderCellDef class="col-imp">Importe Solicitado</th>
        <td mat-cell *matCellDef="let row; let i = index" [formGroupName]="i">
          <app-money-field formControlName="importe"></app-money-field>
        </td>
      </ng-container>

      <ng-container matColumnDef="Fuente de Financiamiento">
        <th mat-header-cell *matHeaderCellDef class="col-fuen">Fuente de Financiamiento</th>
        <td mat-cell *matCellDef="let row; let i = index" [formGroupName]="i">
          <app-text-field formControlName="fuenteFinanciamiento"></app-text-field>
        </td>
      </ng-container>

      <ng-container matColumnDef="Cuenta Corriente a la cual acreditar">
        <th mat-header-cell *matHeaderCellDef class="col-cc">Cuenta Corriente a la cual acreditar</th>
        <td mat-cell *matCellDef="let row; let i = index" [formGroupName]="i">
          <app-text-field formControlName="cuentaCorriente"></app-text-field>
        </td>
      </ng-container>

      <ng-container matColumnDef="Notas / Comentarios">
        <th mat-header-cell *matHeaderCellDef class="col-notas">Notas / Comentarios</th>
        <td mat-cell *matCellDef="let row; let i = index" [formGroupName]="i">
          <app-text-field formControlName="comentarios"></app-text-field>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
  </div>
</form>